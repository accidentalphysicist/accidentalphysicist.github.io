<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Web Notebook â€“ Minimal Prototype</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>

<style>
  body {
    margin: 0;
    background: #121212;
    color: #eaeaea;
    font-family: system-ui, sans-serif;
  }

  .toolbar {
    display: flex;
    gap: 10px;
    padding: 10px;
    background: #1e1e1e;
    border-bottom: 1px solid #333;
    align-items: center;
    flex-wrap: wrap;
  }

  button {
    background: #2a2a2a;
    border: 1px solid #444;
    color: #fff;
    padding: 6px 10px;
    cursor: pointer;
  }

  button.active {
    background: #3f51b5;
  }

  .color {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid #333;
  }

  input[type="range"] {
    width: 100px;
  }

  canvas {
    background: #181818;
    display: block;
  }
</style>
</head>

<body>

<div class="toolbar">
  <button id="penBtn">Pen</button>

  <button onclick="addRect()">Rect</button>
  <button onclick="addCircle()">Circle</button>
  <button onclick="addTriangle()">Triangle</button>
  <button onclick="addLine()">Line</button>
  <button onclick="addArrow()">Arrow</button>
  <button onclick="addAxes()">Axes</button>

  <label>Size</label>
  <input type="range" min="1" max="50" value="5" id="sizeSlider">

  <label>Fill</label>
  <input type="checkbox" id="fillToggle">

  <div class="color" style="background:red" onclick="setColor('red')"></div>
  <div class="color" style="background:green" onclick="setColor('green')"></div>
  <div class="color" style="background:blue" onclick="setColor('blue')"></div>
  <div class="color" style="background:white" onclick="setColor('white')"></div>
  <div class="color" style="background:yellow" onclick="setColor('yellow')"></div>
</div>

<canvas id="c" width="1400" height="700"></canvas>

<script>
  const canvas = new fabric.Canvas('c', {
    selection: true
  });

  let currentColor = 'white';
  let currentSize = 5;

  // Pen
  const penBtn = document.getElementById('penBtn');
  penBtn.onclick = () => {
    canvas.isDrawingMode = true;
    canvas.freeDrawingBrush.color = currentColor;
    canvas.freeDrawingBrush.width = currentSize;
  };

  // Size control
  document.getElementById('sizeSlider').oninput = (e) => {
    currentSize = parseInt(e.target.value);
    if (canvas.freeDrawingBrush) {
      canvas.freeDrawingBrush.width = currentSize;
    }
  };

  // Color
  function setColor(color) {
    currentColor = color;
    if (canvas.freeDrawingBrush) {
      canvas.freeDrawingBrush.color = color;
    }
  }

  function fillOrHollow() {
    return document.getElementById('fillToggle').checked
      ? currentColor
      : null;
  }

  function disablePen() {
    canvas.isDrawingMode = false;
  }

  // Shapes
  function addRect() {
    disablePen();
    canvas.add(new fabric.Rect({
      left: 100,
      top: 100,
      width: 120,
      height: 80,
      fill: fillOrHollow(),
      stroke: currentColor,
      strokeWidth: 2
    }));
  }

  function addCircle() {
    disablePen();
    canvas.add(new fabric.Circle({
      left: 150,
      top: 150,
      radius: 50,
      fill: fillOrHollow(),
      stroke: currentColor,
      strokeWidth: 2
    }));
  }

  function addTriangle() {
    disablePen();
    canvas.add(new fabric.Triangle({
      left: 200,
      top: 200,
      width: 100,
      height: 100,
      fill: fillOrHollow(),
      stroke: currentColor,
      strokeWidth: 2
    }));
  }

  function addLine() {
    disablePen();
    canvas.add(new fabric.Line([50, 50, 200, 50], {
      stroke: currentColor,
      strokeWidth: 2
    }));
  }

  function addArrow() {
    disablePen();
    const line = new fabric.Line([100, 300, 250, 300], {
      stroke: currentColor,
      strokeWidth: 2
    });

    const arrowHead = new fabric.Triangle({
      left: 250,
      top: 290,
      width: 15,
      height: 20,
      fill: currentColor,
      angle: 90
    });

    canvas.add(line, arrowHead);
  }

  function addAxes() {
    disablePen();
    const xAxis = new fabric.Line([100, 350, 400, 350], {
      stroke: currentColor,
      strokeWidth: 2
    });

    const yAxis = new fabric.Line([250, 200, 250, 500], {
      stroke: currentColor,
      strokeWidth: 2
    });

    canvas.add(xAxis, yAxis);
  }
</script>

</body>
</html>
